<?xml version="1.0" encoding="UTF-8"?>
<pages xmlns="http://jboss.com/products/seam/pages" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jboss.com/products/seam/pages http://jboss.com/products/seam/pages-2.2.xsd"
	no-conversation-view-id="/login.xhtml" login-view-id="/login.xhtml">


	<page view-id="*">
		<navigation from-action="#{identity.logout}">
			<redirect view-id="/login.xhtml" />
		</navigation>

		<navigation>
			<rule if-outcome="home">
				<redirect view-id="/view/home.xhtml" />
			</rule>
		</navigation>
	</page>

	<page view-id="/login.xhtml">
		<rewrite pattern="/" />
		<rewrite pattern="/index{.*}" />
		<rewrite pattern="/default{.*}" />
		<rewrite pattern="/welcome{.*}" />
		<rewrite pattern="/login{.*}" />


		<navigation from-action="#{identity.login}">
			<rule if="#{identity.loggedIn}">
				<redirect view-id="/view/home.xhtml" />
			</rule>
		</navigation>
	</page>

	<page view-id="/view/*" login-required="true">
	</page>

	<page view-id="/view/projeto.xhtml">
		<param name="projetoId" value="#{projetoHome.projetoId}" />
	</page>

	<page view-id="/view/projetoinclude/projectPhases.xhtml">
		<navigation>
			<rule if-outcome="aberturaprojeto">
				<render view-id="/view/projetoinclude/aberturaprojeto.xhtml" />
			</rule>
			<rule if-outcome="planoprojeto">
				<render view-id="/view/projetoinclude/planoglobal.xhtml" />
			</rule>
			<rule if-outcome="execucaoprojeto">
				<render view-id="/view/projetoinclude/execucaoprojeto.xhtml" />
			</rule>
			<rule if-outcome="encerrarprojeto">
				<render view-id="/view/projetoinclude/encerrarprojeto.xhtml" />
			</rule>
			<rule if-outcome="monitoriacontrole">
				<render view-id="/view/projetoinclude/monitoriacontrole.xhtml" />
			</rule>
			<rule if-outcome="controlemudanca">
				<render view-id="/view/projetoinclude/controlemudanca.xhtml" />
			</rule>
		</navigation>
	</page>

	<page view-id="/view/projetoinclude/monitoriacontrole.xhtml">
		<navigation>
			<rule if-outcome="aberturaprojeto">
				<render view-id="/view/projetoinclude/aberturaprojeto.xhtml" />
			</rule>
			<rule if-outcome="planoprojeto">
				<render view-id="/view/projetoinclude/planoglobal.xhtml" />
			</rule>
			<rule if-outcome="execucaoprojeto">
				<render view-id="/view/projetoinclude/execucaoprojeto.xhtml" />
			</rule>
			<rule if-outcome="encerrarprojeto">
				<render view-id="/view/projetoinclude/encerrarprojeto.xhtml" />
			</rule>
		</navigation>
	</page>

	<page view-id="/view/projetoinclude/*">
		<navigation>
			<rule if-outcome="voltar">
				<render view-id="/view/projetoinclude/projectPhases.xhtml" />
			</rule>
		</navigation>
	</page>

	<page view-id="/view/projetoinclude/taskEditor.xhtml">
		<begin-conversation join="true" flush-mode="MANUAL" />
		<action on-postback="false" execute="#{gantt.prepareEditor()}" />
		<param name="tarefaId" value="#{gantt.tarefaId}" />
		<param name="projetoId" value="#{gantt.projetoId}" />
	</page>


	<exception class="org.jboss.seam.framework.EntityNotFoundException">
		<redirect view-id="/error.xhtml">
			<message severity="warn">Record not found</message>
		</redirect>
	</exception>

	<exception class="javax.persistence.EntityNotFoundException">
		<redirect view-id="/error.xhtml">
			<message severity="warn">Record not found</message>
		</redirect>
	</exception>

	<exception class="javax.persistence.EntityExistsException">
		<redirect view-id="/error.xhtml">
			<message severity="warn">Duplicate record</message>
		</redirect>
	</exception>

	<exception class="javax.persistence.OptimisticLockException">
		<end-conversation />
		<redirect view-id="/error.xhtml">
			<message severity="warn">Another user changed the same data, please try again</message>
		</redirect>
	</exception>

	<exception class="javax.persistence.PersistenceException">
		<redirect view-id="/error.xhtml">
			<message>The operation failed, please try again</message>
		</redirect>
	</exception>

	<exception class="org.jboss.seam.security.AuthorizationException">
		<end-conversation />
		<redirect view-id="/security_error.xhtml">
			<message severity="error">You do not have permission to access this resource</message>
		</redirect>
	</exception>

	<exception class="org.jboss.seam.security.NotLoggedInException">
		<redirect view-id="/login.xhtml">
			<message severity="warn">#{messages['org.jboss.seam.NotLoggedIn']}</message>
		</redirect>
	</exception>

	<exception class="javax.faces.application.ViewExpiredException">
		<redirect view-id="/error.xhtml">
			<message severity="warn">Your session has timed out, please try again</message>
		</redirect>
	</exception>

	<exception class="org.jboss.seam.ConcurrentRequestTimeoutException">
		<http-error error-code="503" />
	</exception>

	<exception>
		<redirect view-id="/error.xhtml">
			<message severity="error">Unexpected error, please try again</message>
		</redirect>
	</exception>

</pages>
